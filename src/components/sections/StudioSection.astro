---
import Gallery from '../Gallery.astro';
import { getCollection } from 'astro:content';

interface GalleryImage {
  src: string;
  alt?: string;
  tags?: Array<{
    text: string;
    color?: "Primary" | "Accent" | "Neutral";
  }>;
}

interface Props {
  title?: string;
  description?: string;
  maxVisible?: number;
  className?: string;
}

// Fetch studio images from content collection
const studioEntries = await getCollection('studio');
const studioEntry = studioEntries[0]; // Single entry (index.md)

// Transform to gallery image format
const studioImages: GalleryImage[] = studioEntry 
  ? studioEntry.data.images.map((src: string, index: number) => ({
      src,
      alt: `Studio image ${index + 1}`
    }))
  : [];

const {
  title = "Inside the studio",
  description = "Step into our creative space in the heart of Friedrichshain. Our studio is designed for comfort and inspiration, where art comes to life on skin.",
  maxVisible = 6,
  className = ""
} = Astro.props;
---

<section class={`section section--basic ${className}`}>
  <div class="container">
    <div class="section-text-block">
      <h2 class="section-title">{title}</h2>
      <p class="section-description">{description}</p>
    </div>
    
    <div class="studio-gallery">
      <Gallery images={studioImages} maxVisible={maxVisible} />
    </div>
  </div>
</section>

<style>
  /* Common section styles handled by .section--basic in tokens.css */
  .studio-gallery {
    width: 100%;
  }
</style>
